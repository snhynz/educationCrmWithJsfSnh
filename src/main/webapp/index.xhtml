<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"

	  xmlns:p="http://primefaces.org/ui">


<h:head></h:head>
<body>

		<ui:composition template = "pageTemplate.xhtml">
		<ui:define name = "content">
		<h:form id="lessonFormId">
		<p:outputLabel value="Ders Adı" />
		<p:inputText id="nameId" value="#{lessonController.lesson.name}" />
		<p:commandButton value="Kaydet" style="margin-top: 50px;margin-bottom: 50px"
						 update ="lessonFormId:lessonTableId lessonFormId:nameId growlId"
						 actionListener="#{lessonController.save}"/>
			<p:growl id="growlId" showDetail="true" />
		<p:dataTable id="lessonTableId"
					 var="lss" value="#{lessonController.getList()}"
					 rows="10"
					 paginator="true"
					 rowsPerPageTemplate="5,10,15">
		<f:facet name="header">
			Ders Listesi
		</f:facet>
		<p:column headerText="Numara">
			<h:outputText value="#{lss.id}" />
		</p:column>
		<p:column headerText="Adı">
			<h:outputText value="#{lss.name}" />
		</p:column>
			<p:column headerText="Sil/Güncelle">
				<p:commandButton value="Sil" type ="button"

								 actionListener="#{lessonController.selectLesson(lss)}"
								 onclick="PF('DeleteModal').show();"
								 styleClass="ui-priority-primary"

				/>

				<p:commandButton value="Güncelle"
								 actionListener="#{lessonController.update(lss)}"
								 styleClass="ui-priority-primary"
								 update="lessonFormId:nameId"
				/>
			</p:column>
		</p:dataTable>

			<p:dialog header="Silme İşlemi" widgetVar="DeleteModal"
					  modal="true" closable="false" resizable="false"
					  height="100">
				<h:outputText value="Silmek istediğinize emin misiniz?" />
				<br></br><br></br>
				<h:panelGrid columns="2">
				<p:commandButton value="Evet" style="margin-left: 20px"
												   actionListener="#{lessonController.delete()}"
												   update="lessonTableId"
												   onclick="PF('DeleteModal').hide();"/>

				<p:commandButton value="Hayır"
								 style="margin-left: 50px"
								 actionListener="#{lessonController.clearSelectedLesson()}"
								 onclick="PF('DeleteModal').hide();"/>
				</h:panelGrid>
			</p:dialog>
	</h:form>
		</ui:define>
		</ui:composition>
</body>
</html>
